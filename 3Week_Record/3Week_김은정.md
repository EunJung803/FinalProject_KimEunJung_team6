## Title: [3Week] 김은정

### 미션 요구사항 분석 & 체크리스트

---

**필수 과제 기능 구현 여부**

- [x]  관리자 회원
- [x]  관리자페이지
- [x]  정산데이터 생성
- [x]  건별정산처리
- [x]  전체정산처리

---

**기능 세부 내용 구현 여부**

▶️ 관리자 페이지
- [x]  GET /adm/home/main
- [x]  관리자만 접근 가능
    
    ⇒ 회원 1명을 임의로 관리자로 지정 (`authLevel` == 7) → 해당 회원만 접근 가능
    ( user3 을 생성한 뒤 관리자로 지정하였습니다. )
    

▶️ 정산 데이터 생성
- [x]  정산 데이터 생성 폼 생성 및 처리 (`GET`, `POST`) → 관리자가 월별로 선택하여 생성
- [x]  결제 완료된 `orderItem` → 정산 아이템으로 생성

▶️ 정산
- [x]  정산 데이터 리스트 페이지
- [x]  건별 정산처리
    
    ⇒ 5대 5로 나눔, 수수료는 0원
    
- [x]  전체 정산처리 (여러개의 건들을 선택 → 전체 처리)

▶️ 배치 사용 (`추가 과제`)
- [ ]  정산데이터를 배치로 생성하기
    - 스프링 내장 스케쥴러를 이용해서 배치가 매달 15일 새벽 4시에 실행되도록
    - `@EnableScheduling` 사용
    - Quartz 사용금지, 스프링의 기본적인 스케쥴링 기능을 이용

▶️ 출금 기능 (`추가 과제`)
- [ ]  사용자 예치금 출금 신청 (금액, 통장, 계좌번호 입력)
- [ ]  관리자 페이지에서 출금 신청 목록 확인 가능
- [ ]  관리자가 출금 처리 (건별로 처리, 수수료는 0원)

### 3주차 미션 요약

---

**[접근 방법]**

- 저번 주말부터 이번 3주차 미션에는 개인 사정으로 시간을 많이 할애하지 못하여 완성도가 다소 떨어집니다.
- 스프링부트 음원결제 수업 코드를 최대한 활용하였습니다.
    - [스프링부트 - 음원결제 - wiken.io/ken/10764](https://wiken.io/ken/10764)
- 수업에서 배울 당시에는 정산 기능에 관해 완벽히 이해하지 못한채로 따라했지만 이번 미션을 통해 보다 하나하나 수업 시간에 배웠던 코드를 살펴보며 정산 구현에 대해서 좀 더 잘 이해할 수 있었습니다.

**[특이사항]**

- 정산 기능은 수업 코드를 참고하면 전부 쉽게 구현할 수 있었기에 추가 과제인 출금 기능을 구현하고자 합니다.
- 2주차에 구현하지 못했던 추가 과제인 환불 기능을 구현하고자 합니다. 
  
  (`OrderService` 에 환불 메서드 `refund` 까지는 구현해놨기에 기능 구현을 완성시키고자 합니다.)
- 2주차 리팩토링 당시 발견하지 못했던 부분을 고치고자 합니다.
    
    여러개의 주문을 장바구니에 담은 뒤 결제하면, 주문 목록에 결제 내역이 담기게 되는데, 여러개의 품목이 결제되었기에 주문 상품명 여러개가 타임리프 th:each에 의해서 table 내에 전부 출력되게 됩니다. 
    그렇게 되면 아래와 같이 화면 상에서 표가 밀려 보이게 되기 때문에 이에 대한 리팩토링이 필요합니다.
    
    <img width="1086" alt="스크린샷 2022-11-02 오후 5 24 54" src="https://user-images.githubusercontent.com/62376361/199440128-67643e8f-348a-45a2-9b1b-339f5e50b97d.png">
